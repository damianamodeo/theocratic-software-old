import{r as a}from"./index-dae778db.js";function l(e){const t=a.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return f(()=>{t.current=e},[e]),a.useCallback((...r)=>t.current(...r),[t])}function d(e,t,r,c){const s=a.useRef(t);f(()=>{s.current=t},[t]),a.useEffect(()=>{var o;const i=(o=r==null?void 0:r.current)!==null&&o!==void 0?o:window;if(!(i&&i.addEventListener))return;const n=u=>s.current(u);return i.addEventListener(e,n,c),()=>{i.removeEventListener(e,n,c)}},[e,r,c])}function g(){const e=a.useRef(!0);return e.current?(e.current=!1,!0):e.current}const f=typeof window<"u"?a.useLayoutEffect:a.useEffect;function w(e,t){const r=a.useCallback(()=>{if(typeof window>"u")return t;try{const n=window.localStorage.getItem(e);return n?h(n):t}catch(n){return console.warn(`Error reading localStorage key “${e}”:`,n),t}},[t,e]),[c,s]=a.useState(r),o=l(n=>{typeof window>"u"&&console.warn(`Tried setting localStorage key “${e}” even though environment is not a client`);try{const u=n instanceof Function?n(c):n;window.localStorage.setItem(e,JSON.stringify(u)),s(u),window.dispatchEvent(new Event("local-storage"))}catch(u){console.warn(`Error setting localStorage key “${e}”:`,u)}});a.useEffect(()=>{s(r())},[]);const i=a.useCallback(n=>{n!=null&&n.key&&n.key!==e||s(r())},[e,r]);return d("storage",i),d("local-storage",i),[c,o]}function h(e){try{return e==="undefined"?void 0:JSON.parse(e??"")}catch{console.log("parsing error on",{value:e});return}}function E(e){const t=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[r,c]=a.useState(t(e));function s(){c(t(e))}return a.useEffect(()=>{const o=window.matchMedia(e);return s(),o.addListener?o.addListener(s):o.addEventListener("change",s),()=>{o.removeListener?o.removeListener(s):o.removeEventListener("change",s)}},[e]),r}const m="(prefers-color-scheme: dark)";function S(){const e=E(m),[t,r]=w("usehooks-ts-ternary-dark-mode","system"),[c,s]=a.useState(e);k(()=>{t==="system"&&s(e)},[e]),a.useEffect(()=>{switch(t){case"light":s(!1);break;case"system":s(e);break;case"dark":s(!0);break}},[t,e]);function o(){const i={light:"system",system:"dark",dark:"light"};r(n=>i[n])}return{isDarkMode:c,ternaryDarkMode:t,setTernaryDarkMode:r,toggleTernaryDarkMode:o}}function k(e,t){const r=g();a.useEffect(()=>{if(!r)return e()},t)}export{S as u};
